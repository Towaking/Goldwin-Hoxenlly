<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PuddingFest</title>
    <script defer src="https://cdnjs.cloudflare.com/ajax/libs/firebase/7.14.1-0/firebase.js"></script>
    <script src="/src/script/main.js" defer></script>
    <link rel="stylesheet" href="/src/CSS/event.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"defer ></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js" defer></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  </head>
<body>

    <nav class="nav-container justify-content-evenly p-4" id="navbar">
        <div id="home" class="active">
            <a href="./main.html" class="fly-nav " ><h1>Home</h1></a>
            <a href="#" class="fly-nav " style="text-decoration: underline;"><h1 >Event Page</h1></a>
            <a href="./contact.html" class="fly-nav "><h1 >Contact Us</h1></a>
        </div>
        <a href="javascript:void(0);" class="icon fs-1" onclick="myFunction()">
            <i class="fa fa-bars"></i>
        </a>
    </nav>
    
    <main class="main">
        <div class="bg first"></div>
        <div class="cara-img">
            <div class="txt-explain">
                <h1 class="p-3">
                    Berikut Rangkaian Acara Yang Akan Diselenggarakan
                </h1>
                <div id="carouselExampleControls" class="carousel slide" data-bs-ride="carousel">
                    <div class="carousel-inner">
                    <div class="carousel-item active">
                        <h2 class="carausel-txt">TALK SHOW</h2>
                        <img src="/src/assets/images/webinar.jpg" class="control d-block" alt="...">
                    </div>
                    <div class="carousel-item">
                        <h2 class="carausel-txt">Technology Showcase </h2>  
                        <img src="/src/assets/images/original.jpg" class="control d-block" alt="...">
                    </div>
                    <div class="carousel-item">
                        <h2 class="carausel-txt">Entertaiment Show</h2>  
                        <img src="/src/assets/images/41UaZSFKz4L.jpg" class="control d-block" alt="...">
                    </div>
                </div>
                    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="prev">
                      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                      <span class="visually-hidden">Previous</span>
                    </button>
                    <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="next">
                      <span class="carousel-control-next-icon" aria-hidden="true"></span>
                      <span class="visually-hidden">Next</span>
                    </button>
                  </div>
            </div>
        </div>
        

        <section class="time">
            <div class="timeline">
                <div class="container left">
                  <div class="content">
                    <h2>May 20</h2>
                    <p>The Festival Opening Ceremony</p>
                  </div>
                </div>
                <div class="container right">
                  <div class="content">
                    <h2>May 21</h2>
                    <p>The Technology Showcase</p>
                  </div>
                </div>
                <div class="container left">
                    <div class="content">
                      <h2>May 22</h2>
                      <p>The Talk Show</p>
                    </div>
                  </div>
                <div class="container right">
                  <div class="content">
                    <h2>May 23</h2>
                    <p>The Festival Closing With Entertaiment Show</p>
                  </div>
                </div>
              </div> 
        </section>

        <section class="form">
            <div class="containers">
                <form name="myForm" id="form" class="row g-3 needs-validation con">
                  <h1>Register Here</h1>
                  <div class="isi">
                    <label for="validationCustom01" class="form-label">Name</label>
                    <input type="text" name="fname" class="form-control" id="nama" placeholder="Username" required>
                  </div>
                  <div class="isi">
                    <label for="validationCustomUsername" class="form-label">Email</label>
                    <div class="input-group">
                      <span class="input-group-text" id="inputGroupPrepend">@</span>
                      <input type="text" name="fgmail" class="form-control" id="email" placeholder="Username@gmail.com" aria-describedby="inputGroupPrepend" required>
                    </div>
                  </div>
                  <div class="isi">
                    <label for="validationCustom04" class="form-label">State</label>
                    <select class="form-select" id="state" required>
                      <option selected disabled value="">Choose...</option>
                      <option>Talk Show</option>
                      <option>Technology Showcase</option>
                      <option>Closing Entertaiment Show</option>
                    </select>
                  </div>
                  <div class="isi">
                    <label for="validationCustom05" class="form-label">Phone Number</label>
                    <input type="text" name="fphone" class="form-control" id="number" placeholder="+62815647382950" required>
                  </div>
            
                  <div class="col-12">
                    <button class="btn btn-primary" type="submit">Submit form</button>
                  </div>
                </form>
            </div>
            
        </section>
        
    </main>
    <script>
        const req = new XMLHttpRequest();
        req.open('POST','https://jsonplaceholder.typicode.com/posts');
        req.setRequestHeader('Content-Type','application/JSON');
        req.addEventListener('load',function(){
            if(req.status === 201 && req.readyState === 4){
                const res = JSON.parse(req.responseText);
                console.log(res);
            }
            else{
                throw new Error("Bad Request");
            }
        })
        form.addEventListener('submit',function(e){
            e.preventDefault();
            let nama = document.getElementById('nama').value;
            let email = document.getElementById('email').value;
            let number = document.getElementById('number').value;
            if(nama.lenght < 3){
                alert("Name lenght must be 3 or more");
                return false;
            }
            if((number[0] === 0 && number[1] === 8) && number.lenght > 14 ){
                alert("Phone Must be a number");
                return false;
            }   
                    
            if(email.includes("@") === false){
                console.log(email)
                alert("Email must have @");
                return false;
            } 
            
            const data = {
                nama: nama,
                email: email,
                number: number
            }
            req.send(JSON.stringify(data));
            $(document).ready(function(){
              $("button").click(function(){
                  // $.post(tujuan , data, function())
                  $.post(
                      "post.php",
                      {
                          data
                      },
                      function(data, status){
                          alert("Data: {" + " " + data + "} Status : "+ status);
                      }
                  )
              });
          });

          const firebaseConfig = {
            apiKey: "AIzaSyDkymUcl4A9KeEpiNw1AaMcn2X2qctk2M0",
            authDomain: "lnt-project-7f827.firebaseapp.com",
            databaseURL: "https://lnt-project-7f827-default-rtdb.firebaseio.com",
            projectId: "lnt-project-7f827",
            storageBucket: "lnt-project-7f827.appspot.com",
            messagingSenderId: "66279882533",
            appId: "1:66279882533:web:edd63d54bf7fe33206a4cc",
            measurementId: "G-VLGTXVLHSF"
          };
        
        
          let form = document.querySelector('form');
          firebase.initializeApp(firebaseConfig);
          let database = firebase.database().ref('contact-form');
            // tentuin data yang akan dikirim
            let newContact = database.push();
            
            newContact.set({
                nama,
                email,
                number
            })
            form.reset();
        })
    </script>
</body>
</html>